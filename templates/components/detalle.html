{% raw %}
<div class="view-detalle" v-if="selectedProyecto">
    <h2>Detalle del Proyecto</h2>
    <div class="detalle-card">
        <h3>{{ selectedProyecto.nombre }}</h3>
        <div class="detalle-grid">
            <div class="detalle-item">
                <span class="label">Código:</span>
                <span class="value">{{ selectedProyecto.codigo }}</span>
            </div>
            <div class="detalle-item">
                <span class="label">UF's:</span>
                <span class="value">{{ selectedProyecto.num_ufs }}</span>
            </div>
            <div class="detalle-item">
                <span class="label">Longitud:</span>
                <span class="value">{{ selectedProyecto.longitud }} km</span>
            </div>
            <div class="detalle-item">
                <span class="label">Año Inicio:</span>
                <span class="value">{{ selectedProyecto.anio_inicio }}</span>
            </div>
            <div class="detalle-item">
                <span class="label">Duración:</span>
                <span class="value">{{ selectedProyecto.duracion }} meses</span>
            </div>
            <div class="detalle-item">
                <span class="label">Fase:</span>
                <span class="value">{{ selectedProyecto.fase }}</span>
            </div>
            <div class="detalle-item">
                <span class="label">Ubicación:</span>
                <span class="value">{{ selectedProyecto.ubicacion }}</span>
            </div>
            <div class="detalle-item">
                <span class="label">Costo:</span>
                <span class="value">$ {{ formatNumber(selectedProyecto.costo) }}</span>
            </div>
        </div>
        <div class="detalle-map">
            <div id="detalle-map" style="height: 400px; width: 100%;"></div>
        </div>
    </div>
    
    <div class="detalle-section">
        <h3>Unidades Funcionales</h3>
        <table v-if="unidadesFuncionales.length">
            <thead>
                <tr>
                    <th>UF</th>
                    <th>Longitud (km)</th>
                    <th>Puentes Veh. (Und)</th>
                    <th>Puentes Veh. (m²)</th>
                    <th>Puentes Peat. (Und)</th>
                    <th>Puentes Peat. (m²)</th>
                    <th>Túneles (Und)</th>
                    <th>Túneles (km)</th>
                    <th>Alcance</th>
                    <th>Zona</th>
                    <th>Tipo Terreno</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="uf in unidadesFuncionales" :key="uf.id">
                    <td>{{ uf.unidad_funcional }}</td>
                    <td>{{ uf.longitud_km }}</td>
                    <td>{{ uf.puentes_vehiculares_und }}</td>
                    <td>{{ uf.puentes_vehiculares_mt2 }}</td>
                    <td>{{ uf.puentes_peatonales_und }}</td>
                    <td>{{ uf.puentes_peatonales_mt2 }}</td>
                    <td>{{ uf.tuneles_und }}</td>
                    <td>{{ uf.tuneles_km }}</td>
                    <td>{{ uf.alcance }}</td>
                    <td>{{ uf.zona }}</td>
                    <td>{{ uf.tipo_terreno }}</td>
                </tr>
            </tbody>
        </table>
        <p v-else class="no-data">No hay unidades funcionales registradas</p>
    </div>
    
    <div class="detalle-section">
        <h3>Items de Costo</h3>
        <table v-if="items.length">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Causado</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="item in items" :key="item.id">
                    <td>{{ item.item }}</td>
                    <td>$ {{ formatNumber(item.causado) }}</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td><strong>Total</strong></td>
                    <td><strong>$ {{ formatNumber(totalItems) }}</strong></td>
                </tr>
            </tfoot>
        </table>
        <p v-else class="no-data">No hay items registrados</p>
    </div>
</div>
{% endraw %}

